<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Studio AI Pro</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');

        body {
            background-color: #050505;
            color: #e2e8f0;
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        .cyber-glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .neon-cyan { color: #22d3ee; }
        .bg-neon-cyan { background-color: #22d3ee; }
        .border-neon-cyan { border-color: #22d3ee; }

        .btn-active {
            background: rgba(34, 211, 238, 0.1);
            border-color: #22d3ee;
            color: #22d3ee;
            box-shadow: 0 0 15px rgba(34, 211, 238, 0.15);
        }

        @keyframes spin-slow {
            to { transform: rotate(360deg); }
        }
        .animate-spin-custom { animation: spin-slow 1s linear infinite; }

        @keyframes fade-in {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .animate-fade { animation: fade-in 0.3s ease-out forwards; }
        
        /* Toggle Switch Styling */
        .dot {
            transition: all 0.3s ease-in-out;
        }
        input:checked ~ .dot {
            transform: translateX(100%);
            background-color: #000;
        }
        input:checked ~ .block {
            background-color: #22d3ee;
        }
    </style>
</head>
<body class="selection:bg-cyan-500/30 overflow-x-hidden">

    <div class="max-w-md mx-auto min-h-screen relative pb-40">
        
        <!-- HEADER -->
        <header class="sticky top-0 z-40 p-6 flex justify-between items-center bg-black/80 backdrop-blur-xl border-b border-white/5">
            <div>
                <h1 class="text-xl font-black italic tracking-tighter leading-none uppercase">
                    Cyber <span class="neon-cyan">Studio</span>
                </h1>
                <p class="text-[8px] font-bold text-gray-500 tracking-[0.4em] mt-1 uppercase">Visual Production Pro</p>
            </div>
            <button onclick="toggleOverlay('settings-overlay')" class="p-2.5 bg-white/5 rounded-xl border border-white/10 text-gray-400 active:scale-90 transition">
                <i data-lucide="settings" class="w-5 h-5"></i>
            </button>
        </header>

        <main class="p-6 space-y-10">
            
            <!-- 01 MASTER IMAGE -->
            <section>
                <div class="flex items-center gap-3 mb-5">
                    <div class="w-6 h-6 rounded bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center text-[10px] font-black text-black shadow-lg shadow-cyan-500/20">01</div>
                    <h2 class="text-xs font-bold tracking-[0.2em] text-gray-400 uppercase">Aset Master</h2>
                </div>

                <div id="drop-zone" class="relative border-2 border-dashed border-white/10 rounded-3xl bg-white/5 h-28 flex items-center justify-center hover:border-cyan-500/40 transition-all overflow-hidden group">
                    <!-- Preview Container: Update Teks Sesuai Instruksi -->
                    <div id="upload-empty" class="flex flex-col items-center justify-center gap-2">
                        <div class="w-10 h-10 rounded-full bg-cyan-500/20 flex items-center justify-center text-cyan-400">
                            <i data-lucide="upload" class="w-5 h-5"></i>
                        </div>
                        <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest text-center">Unggah Foto Produk Atau Model</p>
                        <input type="file" id="file-input" class="absolute inset-0 opacity-0 cursor-pointer z-10" accept="image/*">
                    </div>

                    <div id="upload-filled" class="hidden flex items-center gap-4 px-4 w-full h-full bg-black/40 relative">
                        <img id="img-preview" src="" class="w-16 h-20 object-cover rounded-lg border border-white/10">
                        <div class="flex-1 min-w-0">
                            <p class="text-[10px] font-bold text-white uppercase tracking-tighter">Produk Siap Produksi</p>
                            <p class="text-[8px] text-gray-500 uppercase mt-1">Ketuk sampah untuk ganti</p>
                        </div>
                        <button id="btn-trash" class="p-3 rounded-xl bg-red-500/20 text-red-500 hover:bg-red-500/40 active:scale-95 transition relative z-[50]">
                            <i data-lucide="trash-2" class="w-5 h-5"></i>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 02 TARGET PERSONA -->
            <section class="space-y-6">
                <div class="flex items-center gap-3">
                    <div class="w-6 h-6 rounded bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center text-[10px] font-black text-black">02</div>
                    <h2 class="text-xs font-bold tracking-[0.2em] text-gray-400 uppercase">Target Market</h2>
                </div>
                
                <div id="cat-grid" class="grid grid-cols-5 gap-2"></div>
                <div id="sub-row" class="flex gap-2 overflow-x-auto no-scrollbar py-1"></div>
            </section>

            <!-- 03 DIRECTION -->
            <section class="space-y-8">
                <div class="flex items-center gap-3">
                    <div class="w-6 h-6 rounded bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center text-[10px] font-black text-black">03</div>
                    <h2 class="text-xs font-bold tracking-[0.2em] text-gray-400 uppercase">Direktur Kreatif</h2>
                </div>

                <div class="space-y-4">
                    <p class="text-[9px] font-bold text-gray-600 uppercase tracking-widest">Pose & Action</p>
                    <div id="pose-grid" class="grid grid-cols-2 gap-2"></div>
                </div>

                <div class="space-y-4">
                    <p class="text-[9px] font-bold text-gray-600 uppercase tracking-widest">Gerakan Sinematik</p>
                    <div id="move-grid" class="grid grid-cols-2 gap-2"></div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div class="space-y-4">
                        <p class="text-[9px] font-bold text-gray-600 uppercase tracking-widest">Sudut Kamera</p>
                        <div id="angle-list" class="space-y-2"></div>
                    </div>
                    <div class="space-y-4">
                        <p class="text-[9px] font-bold text-gray-600 uppercase tracking-widest">Lokasi</p>
                        <div id="loc-list" class="space-y-2"></div>
                    </div>
                </div>
            </section>

            <!-- 04 VIBE -->
            <section class="space-y-4">
                <div class="flex items-center gap-3">
                    <div class="w-6 h-6 rounded bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center text-[10px] font-black text-black">04</div>
                    <h2 class="text-xs font-bold tracking-[0.2em] text-gray-400 uppercase">Visual Vibe</h2>
                </div>
                <div id="vibe-row" class="flex gap-2 overflow-x-auto no-scrollbar py-1"></div>
            </section>

        </main>

        <!-- FOOTER GENERATE -->
        <footer class="fixed bottom-8 left-0 right-0 p-6 z-40 max-w-md mx-auto pointer-events-none">
            <div class="absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent translate-y-8"></div>
            <button id="btn-generate" class="relative w-full py-5 bg-gradient-to-r from-cyan-400 to-blue-600 rounded-2xl flex items-center justify-center gap-3 shadow-[0_10px_40px_rgba(34,211,238,0.3)] active:scale-95 pointer-events-auto transition-all">
                <i data-lucide="zap" class="w-5 h-5 text-black fill-black"></i>
                <span class="text-xs font-black text-black tracking-widest uppercase">Generate 9:16 Visual</span>
            </button>
        </footer>

    </div>

    <!-- OVERLAY: RESULT -->
    <div id="result-overlay" class="fixed inset-0 z-50 bg-black overflow-y-auto p-5 hidden animate-fade">
        <div class="max-w-md mx-auto pb-32">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-xl font-black italic tracking-tighter uppercase">
                    <span class="neon-cyan">STUDIO</span> <span class="text-white">HASIL</span>
                </h2>
                <button onclick="toggleOverlay('result-overlay')" class="p-3 bg-white/5 rounded-full border border-white/10 active:scale-90 transition">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            
            <div class="w-full aspect-[9/16] rounded-[48px] overflow-hidden border border-white/10 mb-6 relative bg-[#111] shadow-2xl">
                <img id="final-image" src="" class="w-full h-full object-cover">
            </div>

            <button id="btn-download" class="mb-10 w-full py-4 bg-white text-black rounded-2xl font-black text-xs uppercase flex items-center justify-center gap-2 active:scale-95 transition shadow-xl">
                <i data-lucide="download" class="w-4 h-4"></i> SIMPAN GAMBAR KE GALERI
            </button>

            <div id="script-list" class="space-y-4"></div>
        </div>
    </div>

    <!-- OVERLAY: SETTINGS -->
    <div id="settings-overlay" class="fixed inset-0 z-50 bg-black p-6 flex flex-col hidden animate-fade">
        <div class="max-w-md mx-auto w-full h-full flex flex-col overflow-hidden">
            <div class="flex justify-between items-center mb-10">
                <h2 class="text-xl font-black italic neon-cyan uppercase tracking-tighter">Studio <span className="text-white">Settings</span></h2>
                <button onclick="toggleOverlay('settings-overlay')" class="p-3 bg-white/5 rounded-full border border-white/10 active:scale-90 transition">
                    <i data-lucide="chevron-left" class="w-5 h-5"></i>
                </button>
            </div>
            
            <div class="flex-1 overflow-y-auto no-scrollbar space-y-8 pb-10">
                
                <!-- KONFIGURASI MESIN -->
                <div class="bg-white/5 border border-white/5 rounded-3xl p-6 space-y-6">
                    <p class="text-[10px] font-black neon-cyan tracking-[0.2em] uppercase">Konfigurasi Mesin</p>
                    <div class="flex justify-between items-center">
                        <span class="text-xs font-bold text-gray-300">Skrip Otomatis</span>
                        <label for="script-toggle" class="flex items-center cursor-pointer">
                            <div class="relative">
                                <input type="checkbox" id="script-toggle" class="sr-only" checked>
                                <div class="block w-11 h-6 bg-gray-800 rounded-full"></div>
                                <div class="dot absolute left-1 top-1 bg-gray-400 w-4 h-4 rounded-full transition shadow-sm"></div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- RIWAYAT PRODUKSI -->
                <div class="bg-white/5 border border-white/5 rounded-3xl p-6">
                    <div class="flex items-center gap-2 mb-6">
                        <i data-lucide="clock" class="w-4 h-4 neon-cyan"></i>
                        <p class="text-[10px] font-black text-white tracking-[0.2em] uppercase">Riwayat Produksi</p>
                    </div>
                    <div id="history-list" class="space-y-4">
                        <p class="text-[9px] text-gray-600 uppercase text-center py-10 font-bold">Belum ada riwayat</p>
                    </div>
                </div>

                <button id="btn-reset" class="w-full py-4 rounded-2xl bg-red-500/10 border border-red-500/20 text-red-500 text-[10px] font-black uppercase tracking-widest active:scale-95 flex items-center justify-center gap-2">
                    <i data-lucide="refresh-cw" class="w-4 h-4"></i> Padam Semua Data Studio
                </button>
            </div>
        </div>
    </div>

    <!-- LOADING OVERLAY -->
    <div id="loader" class="fixed inset-0 z-[100] bg-black/98 flex flex-col items-center justify-center p-10 text-center hidden">
        <div class="w-16 h-16 border-4 border-cyan-500/10 border-t-cyan-500 rounded-full animate-spin-custom mb-8"></div>
        <h2 id="loader-msg" class="text-xl font-black italic text-white mb-2 uppercase">Proses Kreatif...</h2>
        <p class="text-[10px] font-bold text-gray-600 uppercase tracking-widest">Intelligence Visual Engine Active</p>
    </div>

    <!-- TOAST -->
    <div id="toast" class="fixed bottom-32 left-1/2 -translate-x-1/2 z-[200] px-6 py-3 bg-white text-black rounded-full flex items-center gap-3 shadow-2xl transition-all duration-300 opacity-0 translate-y-10 scale-90 pointer-events-none">
        <i data-lucide="check-circle-2" class="w-4 h-4 text-green-600"></i>
        <span id="toast-text" class="text-[10px] font-black uppercase tracking-widest text-black">Berhasil!</span>
    </div>

    <script>
        const apiKey = ""; 
        
        let state = {
            masterImage: null,
            category: 'Fashion',
            subCat: 'Hijab Style',
            pose: 'Pegang di Pipi',
            angle: 'Eye Level',
            move: 'Drone Sweep',
            location: 'Studio Polos',
            vibe: 'Clean Girl'
        };

        let history = [];

        const categories = [
            { id: 'Kecantikan', icon: 'âœ¨' },
            { id: 'Fashion', icon: 'ðŸ‘—' },
            { id: 'Gadget', icon: 'ðŸ“±' },
            { id: 'Rumah', icon: 'ðŸ ' },
            { id: 'Bayi', icon: 'ðŸ¼' }
        ];

        const subMap = {
            'Kecantikan': ['Skincare', 'Makeup', 'Parfum', 'Bodycare'],
            'Fashion': ['Hijab Style', 'Casual Outfit', 'Formal Wear', 'Tas & Sepatu'],
            'Gadget': ['Smartphone', 'Smartwatch', 'Audio Gear', 'Gaming'],
            'Rumah': ['Living Room', 'Kitchen', 'Bedroom'],
            'Bayi': ['Baby Wear', 'Toys', 'Stroller']
        };

        const poses = ['Pegang di Pipi', 'OOTD Walking', 'Sedang Pakai', 'Mirror Check'];
        const moves = ['Static (Diam)', 'Drone Sweep', 'Handheld Vlog', 'Cinematic Slider'];
        const angles = ['Eye Level', 'Low Angle', 'High Angle', 'Mirror Selfie'];
        const locations = ['Studio Polos', 'Kamar Aesthetic', 'Luxury Room', 'Nature'];
        const vibes = ['Clean Girl', 'Old Money', 'Energetic Pop', 'Dark Moody'];

        function init() {
            renderUI();
            lucide.createIcons();
            
            document.getElementById('file-input').addEventListener('change', (e) => {
                const file = e.target.files[0];
                if(file) {
                    const reader = new FileReader();
                    reader.onload = (f) => {
                        state.masterImage = f.target.result;
                        updateUploadUI();
                    };
                    reader.readAsDataURL(file);
                }
            });

            document.getElementById('btn-trash').addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                state.masterImage = null;
                document.getElementById('file-input').value = "";
                updateUploadUI();
                showToast("Foto dihapus");
            });

            document.getElementById('btn-generate').addEventListener('click', generateVisual);
            document.getElementById('btn-reset').addEventListener('click', () => {
                state.masterImage = null;
                history = [];
                updateUploadUI();
                renderHistory();
                toggleOverlay('settings-overlay');
                showToast("Data studio dibersihkan");
            });
            
            document.getElementById('btn-download').addEventListener('click', () => {
                const a = document.createElement('a');
                a.href = document.getElementById('final-image').src;
                a.download = `CyberStudio_${Date.now()}.png`;
                a.click();
                showToast("Gambar disimpan");
            });
        }

        function renderUI() {
            const catGrid = document.getElementById('cat-grid');
            catGrid.innerHTML = categories.map(c => `
                <button onclick="setParam('category', '${c.id}')" class="p-3 rounded-2xl cyber-glass border transition-all flex flex-col items-center gap-2 ${state.category === c.id ? 'btn-active bg-white !text-black' : 'text-gray-500'}">
                    <span class="text-lg">${c.icon}</span>
                    <span class="text-[7px] font-black uppercase tracking-tighter">${c.id}</span>
                </button>
            `).join('');

            const subRow = document.getElementById('sub-row');
            subRow.innerHTML = (subMap[state.category] || []).map(s => `
                <button onclick="setParam('subCat', '${s}')" class="px-4 py-2.5 rounded-xl border text-[10px] font-bold transition-all whitespace-nowrap ${state.subCat === s ? 'btn-active' : 'bg-white/5 border-white/5 text-gray-500'}">
                    ${s.toUpperCase()}
                </button>
            `).join('');

            document.getElementById('pose-grid').innerHTML = poses.map(p => `
                <button onclick="setParam('pose', '${p}')" class="px-4 py-3 rounded-xl border text-[10px] font-bold transition-all ${state.pose === p ? 'btn-active' : 'bg-white/5 border-white/5 text-gray-500'}">
                    ${p.toUpperCase()}
                </button>
            `).join('');

            document.getElementById('move-grid').innerHTML = moves.map(m => `
                <button onclick="setParam('move', '${m}')" class="px-4 py-3 rounded-xl border text-[10px] font-bold flex items-center justify-center gap-2 transition-all ${state.move === m ? 'btn-active' : 'bg-white/5 border-white/5 text-gray-500'}">
                    <i data-lucide="video" class="w-3 h-3"></i> ${m.toUpperCase()}
                </button>
            `).join('');

            document.getElementById('angle-list').innerHTML = angles.map(a => `
                <button onclick="setParam('angle', '${a}')" class="w-full py-2.5 rounded-xl border text-[9px] font-bold transition-all ${state.angle === a ? 'btn-active' : 'bg-white/5 border-white/5 text-gray-500'}">
                    ${a.toUpperCase()}
                </button>
            `).join('');

            document.getElementById('loc-list').innerHTML = locations.map(l => `
                <button onclick="setParam('location', '${l}')" class="w-full py-2.5 rounded-xl border text-[9px] font-bold transition-all ${state.location === l ? 'btn-active' : 'bg-white/5 border-white/5 text-gray-500'}">
                    ${l.toUpperCase()}
                </button>
            `).join('');

            document.getElementById('vibe-row').innerHTML = vibes.map(v => `
                <button onclick="setParam('vibe', '${v}')" class="px-6 py-2.5 rounded-full border text-[10px] font-bold transition-all whitespace-nowrap ${state.vibe === v ? 'bg-white text-black' : 'bg-white/5 border-white/5 text-gray-500'}">
                    ${v.toUpperCase()}
                </button>
            `).join('');

            lucide.createIcons();
        }

        function setParam(key, val) {
            state[key] = val;
            if(key === 'category') state.subCat = subMap[val][0];
            renderUI();
        }

        function updateUploadUI() {
            const empty = document.getElementById('upload-empty');
            const filled = document.getElementById('upload-filled');
            const preview = document.getElementById('img-preview');
            if(state.masterImage) {
                empty.classList.add('hidden');
                filled.classList.remove('hidden');
                preview.src = state.masterImage;
            } else {
                empty.classList.remove('hidden');
                filled.classList.add('hidden');
            }
        }

        async function generateVisual() {
            if(!state.masterImage) return showToast("Unggah foto produk dulu!");
            const loader = document.getElementById('loader');
            const msg = document.getElementById('loader-msg');
            loader.style.display = 'flex';
            try {
                msg.innerText = "Menyusun Skrip...";
                const scriptRes = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: `Buat script iklan viral untuk ${state.subCat}. Format JSON: {"hook":{"text":"..."},"problem":{"text":"..."},"solution":{"text":"..."},"cta":{"text":"..."}}` }] }],
                        generationConfig: { responseMimeType: "application/json" }
                    })
                });
                const scripts = JSON.parse((await scriptRes.json()).candidates[0].content.parts[0].text);
                msg.innerText = "Merender Visual Pro...";
                const imgRes = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image-preview:generateContent?key=${apiKey}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        contents: [{ parts: [
                            { text: `Gunakan foto ini sebagai referensi UTAMA. PERTAHANKAN produk agar 100% SAMA. Lokasi: ${state.location}, Pose: ${state.pose}, Gerakan: ${state.move}. Hasil BERSIH sampai kaki, tanpa gradasi hitam bawah, tanpa teks. 9:16.` },
                            { inlineData: { mimeType: "image/jpeg", data: state.masterImage.split(',')[1] } }
                        ]}],
                        generationConfig: { responseModalities: ['TEXT', 'IMAGE'] }
                    })
                });
                const imgData = await imgRes.json();
                const b64 = imgData.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;
                if(b64) {
                    const finalImg = `data:image/jpeg;base64,${b64}`;
                    const resObj = { scripts, image: finalImg, time: new Date().toLocaleTimeString() };
                    document.getElementById('final-image').src = finalImg;
                    renderScripts(scripts);
                    history.unshift(resObj);
                    renderHistory();
                    loader.style.display = 'none';
                    toggleOverlay('result-overlay');
                }
            } catch (e) {
                loader.style.display = 'none';
                showToast("Sistem AI sibuk");
            }
        }

        function renderScripts(s) {
            const container = document.getElementById('script-list');
            container.innerHTML = ['hook', 'problem', 'solution', 'cta'].map(k => `
                <div class="p-6 rounded-3xl cyber-glass border border-white/5">
                    <div class="flex justify-between items-center mb-4">
                        <p class="text-[9px] font-black neon-cyan tracking-widest uppercase">${k}</p>
                        <button onclick="copyTxt('${s[k].text}')" class="text-gray-500 hover:text-white"><i data-lucide="copy" class="w-4 h-4"></i></button>
                    </div>
                    <p class="text-sm italic text-gray-200 leading-relaxed">"${s[k].text}"</p>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function renderHistory() {
            const list = document.getElementById('history-list');
            if(history.length === 0) {
                list.innerHTML = `<p class="text-[9px] text-gray-600 uppercase text-center py-10 font-bold">Belum ada foto yang dibuat</p>`;
                return;
            }
            list.innerHTML = history.map((item, idx) => `
                <div onclick="showPastResult(${idx})" class="flex items-center gap-4 p-3 bg-white/5 border border-white/5 rounded-2xl cursor-pointer hover:border-cyan-500/30 transition">
                    <img src="${item.image}" class="w-12 h-16 object-cover rounded-lg border border-white/10">
                    <div class="flex-1">
                        <p class="text-[10px] font-bold text-white uppercase">Hasil Visual ${history.length - idx}</p>
                        <p class="text-[8px] text-gray-500 mt-1">${item.time}</p>
                    </div>
                    <i data-lucide="chevron-right" class="w-4 h-4 text-gray-600"></i>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function showPastResult(idx) {
            const item = history[idx];
            document.getElementById('final-image').src = item.image;
            renderScripts(item.scripts);
            toggleOverlay('settings-overlay');
            toggleOverlay('result-overlay');
        }

        function toggleOverlay(id) {
            const el = document.getElementById(id);
            el.classList.toggle('hidden');
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            document.getElementById('toast-text').innerText = msg;
            t.style.opacity = '1';
            t.style.transform = 'translate(-50%, 0) scale(1)';
            setTimeout(() => {
                t.style.opacity = '0';
                t.style.transform = 'translate(-50%, 40px) scale(0.9)';
            }, 2500);
        }

        function copyTxt(txt) {
            const el = document.createElement('textarea');
            el.value = txt;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            showToast("Teks disalin");
        }

        window.onload = init;
    </script>
</body>
</html>