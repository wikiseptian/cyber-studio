<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Studio AI - Powered by Hugging Face</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: #e2e8f0; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .cyber-gradient { background: linear-gradient(90deg, #22d3ee, #2563eb); }
    </style>
</head>
<body class="selection:bg-cyan-500/30">

    <header class="max-w-md mx-auto p-6 flex justify-between items-center sticky top-0 bg-black/80 backdrop-blur-2xl z-40 border-b border-white/5">
        <div>
            <h1 class="text-xl font-black italic tracking-tighter leading-none uppercase">Cyber <span class="text-cyan-400">Studio</span></h1>
            <p class="text-[8px] font-bold text-gray-600 tracking-[0.4em] mt-1 uppercase">Visual Production Pro</p>
        </div>
    </header>

    <main class="max-w-md mx-auto p-6 pb-48 space-y-12">
        <section>
            <div class="flex items-center gap-3 mb-5">
                <div class="w-6 h-6 rounded bg-cyan-500 flex items-center justify-center text-[10px] font-black text-black">01</div>
                <h2 class="text-xs font-bold tracking-widest text-gray-400 uppercase">Aset Master</h2>
            </div>
            <div id="drop-zone" class="relative border-2 border-dashed border-white/10 rounded-3xl bg-white/5 h-32 flex flex-col items-center justify-center cursor-pointer overflow-hidden">
                <input type="file" id="file-input" class="absolute inset-0 opacity-0 cursor-pointer z-10" accept="image/*">
                <div id="preview-container" class="hidden flex items-center gap-4 px-4 w-full h-full bg-black/40 z-20">
                    <img id="img-preview" src="" class="w-20 h-20 object-cover rounded-lg border border-white/10">
                    <p class="text-[10px] font-bold text-white uppercase">Foto Produk Dimuat</p>
                </div>
                <div id="upload-placeholder" class="flex flex-col items-center gap-2">
                    <p class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Muat Naik Foto Produk</p>
                </div>
            </div>
        </section>

        <section class="space-y-6">
            <div class="flex items-center gap-3 mb-5">
                <div class="w-6 h-6 rounded bg-cyan-500 flex items-center justify-center text-[10px] font-black text-black">02</div>
                <h2 class="text-xs font-bold tracking-widest text-gray-400 uppercase">Konfigurasi AI</h2>
            </div>
            <div class="grid grid-cols-2 gap-3">
                <div class="p-4 rounded-2xl bg-white/5 border border-white/5">
                    <p class="text-[8px] font-bold text-gray-500 uppercase mb-2">Vibe Visual</p>
                    <select id="vibe-select" class="bg-transparent text-xs font-bold text-cyan-400 w-full outline-none">
                        <option value="Clean Girl">CLEAN GIRL</option>
                        <option value="Old Money">OLD MONEY</option>
                        <option value="Streetwear">STREETWEAR</option>
                    </select>
                </div>
                <div class="p-4 rounded-2xl bg-white/5 border border-white/5">
                    <p class="text-[8px] font-bold text-gray-500 uppercase mb-2">Lokasi</p>
                    <select id="loc-select" class="bg-transparent text-xs font-bold text-cyan-400 w-full outline-none">
                        <option value="Studio">STUDIO POLOS</option>
                        <option value="Aesthetic Room">KAMAR ESTETIK</option>
                        <option value="Cafe">CAFE MEWAH</option>
                    </select>
                </div>
            </div>
        </section>
    </main>

    <footer class="fixed bottom-8 left-0 right-0 p-6 z-50 max-w-md mx-auto">
        <button id="btn-generate" class="w-full py-5 cyber-gradient rounded-2xl flex items-center justify-center gap-3 shadow-xl active:scale-95 transition-all">
            <span class="text-xs font-black text-black tracking-widest uppercase">Generate Visual Script</span>
        </button>
    </footer>

    <div id="result-overlay" class="fixed inset-0 z-[100] bg-black hidden overflow-y-auto p-6">
        <div class="max-w-md mx-auto pb-20">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-xl font-black italic text-cyan-400 uppercase">Studio <span class="text-white">Hasil</span></h2>
                <button onclick="closeResult()" class="p-2 bg-white/5 rounded-full text-white">âœ•</button>
            </div>
            <div class="aspect-[9/16] bg-white/5 rounded-3xl mb-6 overflow-hidden border border-white/10">
                <img id="final-image" src="" class="w-full h-full object-cover">
            </div>
            <div id="ai-script-box" class="p-6 rounded-3xl bg-white/5 border border-white/10 space-y-4">
                <p id="ai-text-result" class="text-sm italic leading-relaxed text-gray-300">Memproses hasil...</p>
            </div>
        </div>
    </div>

    <div id="loading-screen" class="fixed inset-0 z-[200] bg-black/95 hidden flex flex-col items-center justify-center p-10">
        <div class="w-12 h-12 border-4 border-cyan-500/20 border-t-cyan-500 rounded-full animate-spin mb-4"></div>
        <p class="text-xs font-black uppercase tracking-widest text-white">AI Sedang Berpikir...</p>
    </div>

    <script>
        // --- KONFIGURASI API ---
        const hfToken = "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"; 
        let masterImageBase64 = null;

        // --- PREVIEW FOTO ---
        document.getElementById('file-input').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(f) {
                    masterImageBase64 = f.target.result;
                    document.getElementById('img-preview').src = masterImageBase64;
                    document.getElementById('preview-container').classList.remove('hidden');
                    document.getElementById('upload-placeholder').classList.add('hidden');
                };
                reader.readAsDataURL(file);
            }
        });

        // --- FUNGSI GENERATE ---
        document.getElementById('btn-generate').addEventListener('click', async () => {
            if (!masterImageBase64) return alert("Upload foto produk dulu!");
            
            const loader = document.getElementById('loading-screen');
            loader.classList.remove('hidden');

            try {
                // Menggunakan model Mistral dari Hugging Face
                const response = await fetch("https://api-inference.huggingface.co/models/mistralai/Mistral-7B-Instruct-v0.2", {
                    headers: { 
                        "Authorization": `Bearer ${hfToken}`,
                        "Content-Type": "application/json"
                    },
                    method: "POST",
                    body: JSON.stringify({ 
                        inputs: `Buat 1 baris kalimat promosi viral singkat untuk produk ini dengan vibe ${document.getElementById('vibe-select').value}.` 
                    }),
                });

                const result = await response.json();
                const aiText = result[0]?.generated_text || "Produk fashion premium untuk gaya Anda.";

                // Tampilkan Hasil
                document.getElementById('final-image').src = masterImageBase64;
                document.getElementById('ai-text-result').innerText = `"${aiText}"`;
                document.getElementById('result-overlay').classList.remove('hidden');

            } catch (error) {
                console.error(error);
                alert("Model sedang loading, silakan tunggu 30 detik lalu coba lagi.");
            } finally {
                loader.classList.add('hidden');
            }
        });

        function closeResult() {
            document.getElementById('result-overlay').classList.add('hidden');
        }
    </script>
</body>
</html>
